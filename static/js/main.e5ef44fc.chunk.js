(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{147:function(e,t){},149:function(e,t){},183:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),r=a.n(c),i=a(25),s=a(226),o=a(221),l=a(216),d=a(219),j=a(187),u=a(12),b=a(98),p=a(59),m=a.n(p),O=a(3),x=Object(n.createContext)(),f=Object(b.io)("https://warm-wildwood-81069.herokuapp.com"),h=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(n.useState)(),b=Object(u.a)(j,2),p=b[0],h=b[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),w=v[0],y=v[1],C=Object(n.useState)({}),N=Object(u.a)(C,2),k=N[0],S=N[1],I=Object(n.useState)(""),D=Object(u.a)(I,2),A=D[0],B=D[1],R=Object(n.useRef)(),E=Object(n.useRef)(),U=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){h(e),R.current.srcObject=e})),f.on("me",(function(e){return B(e)})),f.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(O.jsx)(x.Provider,{value:{call:k,callAccepted:r,myVideo:R,userVideo:E,stream:p,name:w,setName:y,callEnded:l,me:A,callUser:function(e){var t=new m.a({initiator:!0,trickle:!1,stream:p});t.on("signal",(function(t){f.emit("callUser",{userToCall:e,signalData:t,from:A,name:w})})),t.on("stream",(function(e){E.current.srcObject=e})),f.on("callAccepted",(function(e){i(!0),t.signal(e)})),U.current=t},leaveCall:function(){d(!0),U.current.destroy(),window.location.reload()},answerCall:function(){i(!0);var e=new m.a({initiator:!1,trickle:!1,stream:p});e.on("signal",(function(e){f.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){E.current.srcObject=e})),e.signal(k.signal),U.current=e}},children:t})},g=Object(l.a)((function(e){return{video:Object(i.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(i.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"none",margin:"10px"}}})),v=function(){var e=Object(n.useContext)(x),t=e.name,a=e.callAccepted,c=e.myVideo,r=e.userVideo,i=e.callEnded,s=e.stream,l=e.call,u=g();return Object(O.jsxs)(d.a,{container:!0,className:u.gridContainer,children:[s&&Object(O.jsx)(j.a,{className:u.paper,children:Object(O.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video})]})}),a&&!i&&Object(O.jsx)(j.a,{className:u.paper,children:Object(O.jsxs)(d.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:l.name||"Name"}),Object(O.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:u.video})]})})]})},w=a(43),y=a.n(w),C=a(60),N=a(222),k=a(227),S=a(228),I=a(104),D=a(223),A=a(224),B=a(225),R=a(61),E=a.n(R),U=(a(183),Object(l.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(i.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(i.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}}))),V=function(e){var t=e.children,a=Object(n.useContext)(x),c=a.me,r=a.callAccepted,i=a.setName,s=a.callEnded,l=a.leaveCall,b=a.callUser,p=Object(n.useState)(""),m=Object(u.a)(p,2),f=m[0],h=m[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),w=v[0],R=v[1],V=Object(n.useState)(""),P=Object(u.a)(V,2),T=P[0],W=P[1],z=Object(n.useState)(""),q=Object(u.a)(z,2),F=q[0],J=q[1],_=Object(n.useState)(""),H=Object(u.a)(_,2),L=H[0],M=H[1],G=Object(n.useState)("false"),K=Object(u.a)(G,2),Q=K[0],X=K[1],Y=Object(n.useState)(""),Z=Object(u.a)(Y,2),$=Z[0],ee=Z[1],te=U(),ae=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.post("https://imedcare.herokuapp.com/request/videocall",{appointID:w,videocallID:c}).then((function(e){console.log(e),i(e.data.patient),X("true"),ee(""),W(e.data.patient),J(e.data.Time),M(e.data.Date)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.post("https://imedcare.herokuapp.com/request/videocallbydoc",{appointID:f}).then((function(e){console.log(e),i(e.data.doctor),b(e.data.videocallID)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(N.a,{className:te.container,children:Object(O.jsxs)(j.a,{elevation:10,className:te.paper,children:[Object(O.jsx)("form",{className:te.root,noValidate:!0,autoComplete:"off",children:Object(O.jsxs)(d.a,{container:!0,className:te.gridContainer,children:[Object(O.jsxs)(d.a,{item:!0,xs:12,md:6,className:te.padding,children:[Object(O.jsxs)("div",{className:"ask",children:[" are you patient?",Object(O.jsx)("input",{type:"radio",onChange:function(){return ee("false")},name:"udertype"})," are you doctor? ",Object(O.jsx)("input",{onChange:function(){return ee("true")},type:"radio",name:"udertype"})]}),"false"===$&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(O.jsx)(k.a,{label:"enter your Appoiment tracker id",type:"email",value:w,onChange:function(e){return R(e.target.value)},fullWidth:!0}),Object(O.jsx)(I.CopyToClipboard,{text:c,className:te.margin,children:Object(O.jsx)(S.a,{onClick:ae,variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(O.jsx)(D.a,{fontSize:"large"}),children:"Sumbit"})})]}),"true"===Q&&Object(O.jsx)("div",{className:"patient_info",children:Object(O.jsxs)("div",{className:"Patient_details",children:[Object(O.jsxs)("h12",{children:[" Patient Name : ",T]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("h13",{children:[" Appointment Time: ",F]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("h14",{children:[" Appointmet Date: ",L]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]})})]}),"true"===$&&Object(O.jsxs)(d.a,{item:!0,xs:12,md:6,className:te.padding,children:[Object(O.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Enter appoint tracker ID to make call"}),Object(O.jsx)(k.a,{label:"Appoiment Id",value:f,onChange:function(e){return h(e.target.value)},fullWidth:!0}),r&&!s?Object(O.jsx)(S.a,{variant:"contained",color:"secondary",startIcon:Object(O.jsx)(A.a,{fontSize:"large"}),fullWidth:!0,onClick:l,className:te.margin,children:"Hang Up"}):Object(O.jsx)(S.a,{variant:"contained",color:"primary",startIcon:Object(O.jsx)(B.a,{fontSize:"large"}),fullWidth:!0,onClick:ne,className:te.margin,children:"Call"})]})]})}),t]})})},P=function(){var e=Object(n.useContext)(x),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(O.jsx)(O.Fragment,{children:a.isReceivingCall&&!c&&Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(O.jsxs)("h1",{children:[a.name," is calling:"]}),Object(O.jsx)(S.a,{variant:"contained",color:"#176cbb",onClick:t,children:"Answer"})]})})},T=Object(l.a)((function(e){return{appBar:Object(i.a)({borderRadius:50,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"5px solid #176cbb"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),W=function(){var e=T();return Object(O.jsxs)("div",{className:e.wrapper,children:[Object(O.jsx)(s.a,{className:e.appBar,position:"static",color:"inherit",children:Object(O.jsx)(o.a,{variant:"h3",align:"center",children:"Virtual Room"})}),Object(O.jsx)(v,{}),Object(O.jsx)(V,{children:Object(O.jsx)(P,{})})]})};a(185);r.a.render(Object(O.jsx)(h,{children:Object(O.jsx)(W,{})}),document.getElementById("root"))}},[[186,1,2]]]);
//# sourceMappingURL=main.e5ef44fc.chunk.js.map